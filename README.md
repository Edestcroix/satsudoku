# Satsudoku
A sudoku SAT solver

## Scripts
The following scrips can be used to solve sudoku puzzles using `minisat`
### sud2sat
Converts a sukdou puzzle read from stdin into CNF format and outputs to stdout.
Can parse sudoku puzzles in any format where empty cells are denoted by a consistent character (e.g. `0`, `.` or `_`), and cells are not separated by anything other than whitespace. `sud2sat` assumes the first non-digit character or `0` it encounters after stripping all whitespace is the empty cell character. Only 9x9 puzzles are supported. Since a large portion of the CNF encodings are identical for every sudoku puzzle, `sud2sat` looks for files containing this portion in `data/`, creating them if not found, and then concatenates them with the puzzle-specific CNF. This means that the first time `sud2sat` is run on a puzzle, it will take longer if `data/` is deleted.  
`sud2sat` supports the `-e, or --enc` argument, which specifies the CNF encoding to use. The default is the minimal encoding.

### sat2sud
Converts the satifiablility output from `minisat`, read from stdin, into a solved sudoku puzzle.
Only 9x9 puzzles are supported. The input must be in the format output by `minisat` ran on a CNF file generated by `sud2sat`, and it must be a satisfying assignment. (i.e the starting sudoku puzzle had a solution) A solved puzzle will look like this:  

483 921 657  
967 345 821   
251 876 493   

548 132 976  
729 564 138   
136 798 245   
 
372 689 514   
814 253 769   
695 417 382  


## Benchmarking
The `benchmark` script runs sud2sat on puzzles from `data/puzzles` and gathers benchmarking data from `minisat` solving these puzzles. It supports the following arguments:
-  `-s --silent` prevents printing to stdout when used in conjunction with `-o` or `-a`
- `-t=[] --test=[]` specify testing easy or hard puzzles, defaults to easy when not specified
- `-e=[] --enc=[]` specify the CNF encoding to use, will default to the minimal encoding when not specified. Can be one of either min/minimal, eff/efficient, or ext/extended. (e.g `-e=min` or `-e=extended`)
- `-o=[] --output=[]` specify output. Defaults to `benchmarks/test_resutls.txt` when not specified. Can specify a directory or filename. In case of a directory, the filename will be `test_results.txt`. When used with `-a`, output specified must be a directory.
- `-a --all` tests all encodings with both easy and hard puzzles. Outputs to `benchmarks` unless `-o` is specified. When used with `-o`, output specified must be a directory.
- `-k --keep` keeps the CNF files generated by sud2sat, and the solution encodings from `minisat`. By default, these files are deleted after `minisat` has finished solving them. These will be stored in the `[output]/encodings` directory.
- `-S --summarize` can only be used with `-a`. Outputs a summary of the benchmarking results to `[output]/summary.md`. This will contain the averages of decisions, decision rate, propagations, propagation rates, and CPU time for each encoding, for both easy and hard puzzles.
- `-d --decode` decodes the solution encodings from `minisat` and outputs them to `[output]/solutions`.
- `-h --help` prints the help message.

While running, files generated by `sud2sat` and `minisat` will be stored in the `.working` directory. These will be deleted when the script finishes, unless the `-k` flag is specified, in which case they will be stored in the `[output]/encodings` directory.

## Dependencies
- python3
- 
- minisat2

## Sources
Puzzles in /data/puzzles taken from:

- https://projecteuler.net/project/resources/p096_sudoku.txt

- http://magictour.free.fr/top95
